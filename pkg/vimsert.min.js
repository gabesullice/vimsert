!function(a){"use strict";var d,e,f,g,h,i,j,k,l,m;e=a("textarea").not(".ace_editor").add('input[type="text"]'),a.fn.vimsert=function(){this.bind("keypress",function(a){a.ctrlKey&&9==a.charCode&&i(a)})},i=function(b){var c;f=a(b.currentTarget),c=f.val(),j.setValue(c),l(k),b.preventDefault()},d=function(){g(),h()},g=function(){a("body").append('<textarea id="vimsert-editor" rows="100" cols="80"></textarea>'),a("vimsert-editor").css({position:"absolute",top:"0",left:"0",bottom:"0",right:"0"}),j=ace.edit("vimsert-editor"),j.setTheme("ace/theme/solarized_dark"),ace.config.loadModule("ace/keyboard/vim",function(){var b=require("ace/keyboard/vim").CodeMirror.Vim;b.defineEx("write","w",function(){f.val(j.getValue())}),b.defineEx("quit","q",function(){m()}),b.defineEx("wq","wq",function(){f.val(j.getValue()),m()})}),j.setKeyboardHandler("ace/keyboard/vim"),j.getSession(),k=a(".ace_editor"),k.css({display:"none",height:"75%",width:"75%",position:"fixed","font-size":"15px","z-index":"9999",left:"50%",top:"50%",transform:"translateX(-50%) translateY(-55%)","box-shadow":"#000 0 0 10px"})},h=function(){a(e).vimsert()},l=function(){k.css("display","block"),j.focus(),j.clearSelection()},m=function(){k.css("display","none"),setTimeout(function(){var a=2*f.val().length;f[0].setSelectionRange(a,a),f.focus()},100)},d()}(jQuery,document,window);